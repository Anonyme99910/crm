import{a as f,r as c,n as V,c as d,b as t,d as C,e as n,y as g,z as y,F as q,p as M,w as S,v as u,q as v,o as p,t as a,x as w}from"./app-Cs6lHxPq.js";const _={class:"space-y-6"},$={class:"flex items-center justify-between"},j={class:"card"},z={class:"table-container"},B={class:"table"},L={class:"font-medium"},N={dir:"ltr"},D={dir:"ltr"},F={class:"badge badge-info"},A=["onClick"],E={key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50"},O={class:"bg-white rounded-xl p-6 w-full max-w-md"},T={class:"flex gap-3"},J={__name:"UsersList",setup(G){const b=f([]),m=c({role:""}),i=f(!1),s=c({name:"",email:"",password:"",phone:"",role:"sales"}),r=async()=>{const{data:o}=await v.get("/users",{params:m});b.value=o.data},x=async()=>{await v.post("/users",s),i.value=!1,Object.assign(s,{name:"",email:"",password:"",phone:"",role:"sales"}),r()},k=async o=>{await v.put(`/users/${o.id}`,{is_active:!o.is_active}),r()},U=o=>({admin:"مدير النظام",manager:"مدير",sales:"مبيعات",engineer:"مهندس",accountant:"محاسب"})[o]||o;return V(r),(o,e)=>(p(),d("div",_,[t("div",$,[n(t("select",{"onUpdate:modelValue":e[0]||(e[0]=l=>m.role=l),class:"form-input w-40",onChange:r},[...e[8]||(e[8]=[y('<option value="">كل الأدوار</option><option value="admin">مدير النظام</option><option value="manager">مدير</option><option value="sales">مبيعات</option><option value="engineer">مهندس</option><option value="accountant">محاسب</option>',6)])],544),[[g,m.role]]),t("button",{onClick:e[1]||(e[1]=l=>i.value=!0),class:"btn btn-primary"},"إضافة مستخدم")]),t("div",j,[t("div",z,[t("table",B,[e[9]||(e[9]=t("thead",null,[t("tr",null,[t("th",null,"الاسم"),t("th",null,"البريد"),t("th",null,"الهاتف"),t("th",null,"الدور"),t("th",null,"الحالة"),t("th",null,"إجراءات")])],-1)),t("tbody",null,[(p(!0),d(q,null,M(b.value,l=>(p(),d("tr",{key:l.id},[t("td",L,a(l.name),1),t("td",N,a(l.email),1),t("td",D,a(l.phone||"-"),1),t("td",null,[t("span",F,a(U(l.role)),1)]),t("td",null,[t("span",{class:w([l.is_active?"badge-success":"badge-danger","badge"])},a(l.is_active?"نشط":"غير نشط"),3)]),t("td",null,[t("button",{onClick:H=>k(l),class:w(["text-sm",l.is_active?"text-red-600":"text-green-600"])},a(l.is_active?"تعطيل":"تفعيل"),11,A)])]))),128))])])])]),i.value?(p(),d("div",E,[t("div",O,[e[17]||(e[17]=t("h3",{class:"text-lg font-semibold mb-4"},"إضافة مستخدم",-1)),t("form",{onSubmit:S(x,["prevent"]),class:"space-y-4"},[t("div",null,[e[10]||(e[10]=t("label",{class:"form-label"},"الاسم *",-1)),n(t("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>s.name=l),class:"form-input",required:""},null,512),[[u,s.name]])]),t("div",null,[e[11]||(e[11]=t("label",{class:"form-label"},"البريد *",-1)),n(t("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>s.email=l),type:"email",class:"form-input",dir:"ltr",required:""},null,512),[[u,s.email]])]),t("div",null,[e[12]||(e[12]=t("label",{class:"form-label"},"كلمة المرور *",-1)),n(t("input",{"onUpdate:modelValue":e[4]||(e[4]=l=>s.password=l),type:"password",class:"form-input",dir:"ltr",required:""},null,512),[[u,s.password]])]),t("div",null,[e[13]||(e[13]=t("label",{class:"form-label"},"الهاتف",-1)),n(t("input",{"onUpdate:modelValue":e[5]||(e[5]=l=>s.phone=l),class:"form-input",dir:"ltr"},null,512),[[u,s.phone]])]),t("div",null,[e[15]||(e[15]=t("label",{class:"form-label"},"الدور *",-1)),n(t("select",{"onUpdate:modelValue":e[6]||(e[6]=l=>s.role=l),class:"form-input",required:""},[...e[14]||(e[14]=[y('<option value="admin">مدير النظام</option><option value="manager">مدير</option><option value="sales">مبيعات</option><option value="engineer">مهندس</option><option value="accountant">محاسب</option>',5)])],512),[[g,s.role]])]),t("div",T,[e[16]||(e[16]=t("button",{type:"submit",class:"btn btn-primary"},"حفظ",-1)),t("button",{type:"button",onClick:e[7]||(e[7]=l=>i.value=!1),class:"btn btn-secondary"},"إلغاء")])],32)])])):C("",!0)]))}};export{J as default};
