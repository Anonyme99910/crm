import{a as x,r as h,n as k,c as r,b as t,i as C,e as m,y as w,z as V,B,k as D,l as M,F as N,p as Y,q as j,o as d,s as E,t as o,x as f}from"./app-PrQ92K9m.js";import{d as i}from"./dayjs.min-CxMP4GVf.js";const F={class:"space-y-6"},I={class:"flex items-center justify-between"},L={class:"flex items-center gap-4"},S={class:"flex items-center gap-2"},z={class:"card"},G={class:"table-container"},U={class:"table"},q={class:"font-medium"},A={__name:"InvoicesList",setup(O){const u=x([]),n=h({status:"",overdue:!1}),l=async()=>{const{data:e}=await j.get("/invoices",{params:n});u.value=e.data},b=e=>e.status!=="paid"&&i(e.due_date).isBefore(i()),v=e=>i(e).format("YYYY/MM/DD"),c=e=>new Intl.NumberFormat("ar-EG",{style:"currency",currency:"EGP"}).format(e),_=e=>({draft:"مسودة",sent:"مرسلة",paid:"مدفوعة",partial:"جزئية",overdue:"متأخرة"})[e]||e,g=e=>({draft:"badge-gray",sent:"badge-info",paid:"badge-success",partial:"badge-warning",overdue:"badge-danger"})[e]||"badge-gray";return k(l),(e,a)=>{const y=M("router-link");return d(),r("div",F,[t("div",I,[t("div",L,[m(t("select",{"onUpdate:modelValue":a[0]||(a[0]=s=>n.status=s),class:"form-input w-40",onChange:l},[...a[2]||(a[2]=[V('<option value="">كل الحالات</option><option value="draft">مسودة</option><option value="sent">مرسلة</option><option value="paid">مدفوعة</option><option value="partial">جزئية</option><option value="overdue">متأخرة</option>',6)])],544),[[w,n.status]]),t("label",S,[m(t("input",{type:"checkbox","onUpdate:modelValue":a[1]||(a[1]=s=>n.overdue=s),onChange:l,class:"rounded"},null,544),[[B,n.overdue]]),a[3]||(a[3]=t("span",{class:"text-sm"},"المتأخرة فقط",-1))])]),C(y,{to:"/invoices/create",class:"btn btn-primary"},{default:D(()=>[...a[4]||(a[4]=[E("إنشاء فاتورة",-1)])]),_:1})]),t("div",z,[t("div",G,[t("table",U,[a[5]||(a[5]=t("thead",null,[t("tr",null,[t("th",null,"رقم الفاتورة"),t("th",null,"العنوان"),t("th",null,"المشروع"),t("th",null,"الإجمالي"),t("th",null,"المدفوع"),t("th",null,"الحالة"),t("th",null,"الاستحقاق")])],-1)),t("tbody",null,[(d(!0),r(N,null,Y(u.value,s=>{var p;return d(),r("tr",{key:s.id},[t("td",q,o(s.invoice_number),1),t("td",null,o(s.title),1),t("td",null,o((p=s.project)==null?void 0:p.name),1),t("td",null,o(c(s.total)),1),t("td",null,o(c(s.paid_amount)),1),t("td",null,[t("span",{class:f([g(s.status),"badge"])},o(_(s.status)),3)]),t("td",{class:f({"text-red-600":b(s)})},o(v(s.due_date)),3)])}),128))])])])])])}}};export{A as default};
