import{a as x,r as V,n as k,c as o,b as t,i as _,e as f,y as C,v as w,k as g,l as D,d as M,F as N,p as Y,q as B,o as d,s as v,t as n,x as L}from"./app-Cs6lHxPq.js";import{d as S}from"./dayjs.min-CxMP4GVf.js";const T={class:"space-y-6"},j={class:"flex items-center justify-between"},F={class:"flex items-center gap-4"},H={class:"card"},U={class:"table-container"},q={class:"table"},z={class:"font-medium"},E={key:0,class:"text-center py-12 text-gray-500"},I={__name:"SiteVisitsList",setup($){const r=x([]),l=V({status:"",date_from:""}),i=async()=>{const{data:a}=await B.get("/site-visits",{params:l});r.value=a.data},h=a=>S(a).format("YYYY/MM/DD HH:mm"),y=a=>({scheduled:"مجدولة",in_progress:"جارية",completed:"مكتملة",cancelled:"ملغاة",rescheduled:"معاد جدولتها"})[a]||a,b=a=>({scheduled:"badge-info",completed:"badge-success",cancelled:"badge-danger"})[a]||"badge-gray";return k(i),(a,e)=>{const u=D("router-link");return d(),o("div",T,[t("div",j,[t("div",F,[f(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>l.status=s),class:"form-input w-40",onChange:i},[...e[2]||(e[2]=[t("option",{value:""},"كل الحالات",-1),t("option",{value:"scheduled"},"مجدولة",-1),t("option",{value:"completed"},"مكتملة",-1),t("option",{value:"cancelled"},"ملغاة",-1)])],544),[[C,l.status]]),f(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>l.date_from=s),type:"date",class:"form-input",onChange:i},null,544),[[w,l.date_from]])]),_(u,{to:"/site-visits/create",class:"btn btn-primary"},{default:g(()=>[...e[3]||(e[3]=[v("جدولة معاينة",-1)])]),_:1})]),t("div",H,[t("div",U,[t("table",q,[e[5]||(e[5]=t("thead",null,[t("tr",null,[t("th",null,"العميل"),t("th",null,"العنوان"),t("th",null,"المهندس"),t("th",null,"الموعد"),t("th",null,"الحالة"),t("th",null,"إجراءات")])],-1)),t("tbody",null,[(d(!0),o(N,null,Y(r.value,s=>{var c,m,p;return d(),o("tr",{key:s.id},[t("td",z,n((c=s.lead)==null?void 0:c.name),1),t("td",null,n((m=s.address)==null?void 0:m.substring(0,50))+"...",1),t("td",null,n((p=s.engineer)==null?void 0:p.name),1),t("td",null,n(h(s.scheduled_at)),1),t("td",null,[t("span",{class:L([b(s.status),"badge"])},n(y(s.status)),3)]),t("td",null,[_(u,{to:`/site-visits/${s.id}`,class:"text-primary-600 hover:text-primary-800"},{default:g(()=>[...e[4]||(e[4]=[v("عرض",-1)])]),_:1},8,["to"])])])}),128))])])]),r.value.length===0?(d(),o("div",E,"لا توجد معاينات")):M("",!0)])])}}};export{I as default};
