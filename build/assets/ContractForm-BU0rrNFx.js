import{a as m,r as w,n as x,c as i,b as l,w as _,e as o,y as V,F as g,p as k,v as a,i as U,t as f,k as j,l as q,q as v,f as M,o as u,s as S}from"./app-Cs6lHxPq.js";const B={class:"max-w-3xl"},C={class:"card"},F={class:"grid grid-cols-2 gap-6"},N=["value"],D={class:"flex gap-4"},T=["disabled"],P={__name:"ContractForm",setup(E){const b=M(),r=m(!1),p=m([]),s=w({project_id:null,title:"",total_value:0,start_date:"",end_date:"",scope_of_work:"",terms_conditions:""}),c=async()=>{const{data:n}=await v.get("/projects");p.value=n.data},y=async()=>{var n,t;r.value=!0;try{await v.post("/contracts",s),b.push("/contracts")}catch(d){alert(((t=(n=d.response)==null?void 0:n.data)==null?void 0:t.message)||"حدث خطأ")}finally{r.value=!1}};return x(c),(n,t)=>{const d=q("router-link");return u(),i("div",B,[l("div",C,[t[16]||(t[16]=l("div",{class:"card-header"},[l("h3",{class:"font-semibold"},"إنشاء عقد جديد")],-1)),l("form",{onSubmit:_(y,["prevent"]),class:"card-body space-y-6"},[l("div",F,[l("div",null,[t[8]||(t[8]=l("label",{class:"form-label"},"المشروع *",-1)),o(l("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>s.project_id=e),class:"form-input",required:""},[t[7]||(t[7]=l("option",{value:null},"-- اختر --",-1)),(u(!0),i(g,null,k(p.value,e=>(u(),i("option",{key:e.id,value:e.id},f(e.name),9,N))),128))],512),[[V,s.project_id]])]),l("div",null,[t[9]||(t[9]=l("label",{class:"form-label"},"عنوان العقد *",-1)),o(l("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>s.title=e),class:"form-input",required:""},null,512),[[a,s.title]])]),l("div",null,[t[10]||(t[10]=l("label",{class:"form-label"},"قيمة العقد *",-1)),o(l("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>s.total_value=e),type:"number",class:"form-input",min:"0",required:""},null,512),[[a,s.total_value]])]),l("div",null,[t[11]||(t[11]=l("label",{class:"form-label"},"تاريخ البدء *",-1)),o(l("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>s.start_date=e),type:"date",class:"form-input",required:""},null,512),[[a,s.start_date]])]),l("div",null,[t[12]||(t[12]=l("label",{class:"form-label"},"تاريخ الانتهاء *",-1)),o(l("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>s.end_date=e),type:"date",class:"form-input",required:""},null,512),[[a,s.end_date]])])]),l("div",null,[t[13]||(t[13]=l("label",{class:"form-label"},"نطاق العمل",-1)),o(l("textarea",{"onUpdate:modelValue":t[5]||(t[5]=e=>s.scope_of_work=e),class:"form-input",rows:"3"},null,512),[[a,s.scope_of_work]])]),l("div",null,[t[14]||(t[14]=l("label",{class:"form-label"},"الشروط والأحكام",-1)),o(l("textarea",{"onUpdate:modelValue":t[6]||(t[6]=e=>s.terms_conditions=e),class:"form-input",rows:"3"},null,512),[[a,s.terms_conditions]])]),l("div",D,[l("button",{type:"submit",disabled:r.value,class:"btn btn-primary"},f(r.value?"جاري الحفظ...":"حفظ"),9,T),U(d,{to:"/contracts",class:"btn btn-secondary"},{default:j(()=>[...t[15]||(t[15]=[S("إلغاء",-1)])]),_:1})])],32)])])}}};export{P as default};
