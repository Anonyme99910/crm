import{a as f,r as D,n as N,c as i,b as t,i as p,e as m,v as T,y,z as j,k as v,l as B,d as x,F as Y,p as $,t as a,q as F,o as d,s as g,x as S}from"./app-Cs6lHxPq.js";import{d as U}from"./dayjs.min-CxMP4GVf.js";const q={class:"space-y-6"},z={class:"flex items-center justify-between"},E={class:"flex items-center gap-4"},H={class:"card"},I={class:"table-container"},P={class:"table"},A={class:"font-medium"},G={dir:"ltr"},J={class:"badge badge-gray"},K={class:"flex items-center gap-2"},O={key:0,class:"text-center py-12 text-gray-500"},Q={key:1,class:"p-4 border-t flex items-center justify-between"},R={class:"text-sm text-gray-500"},W={class:"flex gap-2"},X=["disabled"],Z=["disabled"],ot={__name:"LeadsList",setup(tt){const u=f([]),n=f({}),l=D({search:"",status:"",source:""});let b;const w=()=>{clearTimeout(b),b=setTimeout(r,300)},r=async(o=1)=>{try{const{data:e}=await F.get("/leads",{params:{...l,page:o}});u.value=e.data,n.value=e.meta}catch(e){console.error(e)}},_=o=>r(o),k=o=>U(o).format("YYYY/MM/DD"),C=o=>({whatsapp:"واتساب",ads:"إعلانات",call:"مكالمات",website:"موقع",referral:"إحالة",other:"أخرى"})[o]||o,V=o=>({hot:"ساخن",warm:"دافئ",cold:"بارد"})[o]||o,L=o=>({hot:"badge-danger",warm:"badge-warning",cold:"badge-info"})[o]||"badge-gray",M=o=>({new:"جديد",contacted:"تم التواصل",qualified:"مؤهل",proposal:"عرض سعر",negotiation:"تفاوض",won:"مكسب",lost:"خسارة"})[o]||o;return N(r),(o,e)=>{const c=B("router-link");return d(),i("div",q,[t("div",z,[t("div",E,[m(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>l.search=s),type:"text",placeholder:"بحث...",class:"form-input w-64",onInput:w},null,544),[[T,l.search]]),m(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>l.status=s),class:"form-input w-40",onChange:r},[...e[5]||(e[5]=[t("option",{value:""},"كل الحالات",-1),t("option",{value:"hot"},"ساخن",-1),t("option",{value:"warm"},"دافئ",-1),t("option",{value:"cold"},"بارد",-1)])],544),[[y,l.status]]),m(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>l.source=s),class:"form-input w-40",onChange:r},[...e[6]||(e[6]=[j('<option value="">كل المصادر</option><option value="whatsapp">واتساب</option><option value="ads">إعلانات</option><option value="call">مكالمات</option><option value="website">موقع</option><option value="referral">إحالة</option>',6)])],544),[[y,l.source]])]),p(c,{to:"/leads/create",class:"btn btn-primary"},{default:v(()=>[...e[7]||(e[7]=[t("svg",{class:"w-5 h-5 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),g(" إضافة عميل ",-1)])]),_:1})]),t("div",H,[t("div",I,[t("table",P,[e[10]||(e[10]=t("thead",null,[t("tr",null,[t("th",null,"الاسم"),t("th",null,"الهاتف"),t("th",null,"المصدر"),t("th",null,"الحالة"),t("th",null,"المرحلة"),t("th",null,"المسؤول"),t("th",null,"التاريخ"),t("th",null,"إجراءات")])],-1)),t("tbody",null,[(d(!0),i(Y,null,$(u.value,s=>{var h;return d(),i("tr",{key:s.id},[t("td",A,a(s.name),1),t("td",G,a(s.phone),1),t("td",null,a(C(s.source)),1),t("td",null,[t("span",{class:S([L(s.status),"badge"])},a(V(s.status)),3)]),t("td",null,[t("span",J,a(M(s.stage)),1)]),t("td",null,a(((h=s.assigned_user)==null?void 0:h.name)||"-"),1),t("td",null,a(k(s.created_at)),1),t("td",null,[t("div",K,[p(c,{to:`/leads/${s.id}`,class:"text-primary-600 hover:text-primary-800"},{default:v(()=>[...e[8]||(e[8]=[g("عرض",-1)])]),_:1},8,["to"]),p(c,{to:`/leads/${s.id}/edit`,class:"text-gray-600 hover:text-gray-800"},{default:v(()=>[...e[9]||(e[9]=[g("تعديل",-1)])]),_:1},8,["to"])])])])}),128))])])]),u.value.length===0?(d(),i("div",O," لا يوجد عملاء ")):x("",!0),n.value.last_page>1?(d(),i("div",Q,[t("p",R,"عرض "+a(u.value.length)+" من "+a(n.value.total),1),t("div",W,[t("button",{onClick:e[3]||(e[3]=s=>_(n.value.current_page-1)),disabled:n.value.current_page===1,class:"btn btn-sm btn-secondary"},"السابق",8,X),t("button",{onClick:e[4]||(e[4]=s=>_(n.value.current_page+1)),disabled:n.value.current_page===n.value.last_page,class:"btn btn-sm btn-secondary"},"التالي",8,Z)])])):x("",!0)])])}}};export{ot as default};
