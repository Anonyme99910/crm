import{a as _,n as x,c as r,b as s,t,x as h,F as u,p as v,q as b,o as d}from"./app-PrQ92K9m.js";const w={class:"space-y-6"},j={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},R={class:"stat-card"},k={class:"stat-value text-blue-600"},F={class:"stat-card"},L={class:"stat-value text-red-600"},B={class:"stat-card"},E={class:"stat-card"},q={class:"stat-value text-yellow-600"},C={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},D={class:"card"},G={class:"card-body"},I={class:"font-bold"},M={class:"card"},N={class:"card-body"},P={class:"font-bold"},S={class:"card"},z={class:"card-body"},V={class:"font-bold text-red-600"},A={class:"card"},H={class:"card-body space-y-3"},J={class:"flex items-center justify-between"},K={class:"font-bold"},O={class:"flex items-center justify-between"},Q={class:"font-bold"},T={class:"flex items-center justify-between"},U={class:"font-bold"},W={class:"flex items-center justify-between"},X={class:"font-bold text-red-600"},$={__name:"ReportsIndex",setup(Y){const n=_({income:0,expenses:0,profit:0,expenses_by_category:{}}),p=_({by_source:{},conversion_rate:0}),i=_({by_status:{},total_value:0,average_value:0,average_progress:0,delayed:0}),y=async()=>{const[a,e,l]=await Promise.all([b.get("/reports/financial"),b.get("/reports/leads"),b.get("/reports/projects")]);n.value=a.data.data,p.value=e.data.data,i.value=l.data.data},c=a=>new Intl.NumberFormat("ar-EG",{style:"currency",currency:"EGP",maximumFractionDigits:0}).format(a||0),f=a=>({whatsapp:"واتساب",ads:"إعلانات",call:"مكالمات",website:"موقع",referral:"إحالة",other:"أخرى"})[a]||a,g=a=>({pending:"قيد الانتظار",in_progress:"جاري التنفيذ",on_hold:"متوقف",completed:"مكتمل",cancelled:"ملغي"})[a]||a,m=a=>({materials:"خامات",labor:"عمالة",transport:"نقل",equipment:"معدات",other:"أخرى"})[a]||a;return x(y),(a,e)=>(d(),r("div",w,[s("div",j,[s("div",R,[s("p",k,t(c(n.value.income)),1),e[0]||(e[0]=s("p",{class:"stat-label"},"إجمالي الإيرادات",-1))]),s("div",F,[s("p",L,t(c(n.value.expenses)),1),e[1]||(e[1]=s("p",{class:"stat-label"},"إجمالي المصروفات",-1))]),s("div",B,[s("p",{class:h(["stat-value",n.value.profit>=0?"text-green-600":"text-red-600"])},t(c(n.value.profit)),3),e[2]||(e[2]=s("p",{class:"stat-label"},"صافي الربح",-1))]),s("div",E,[s("p",q,t(p.value.conversion_rate)+"%",1),e[3]||(e[3]=s("p",{class:"stat-label"},"معدل التحويل",-1))])]),s("div",C,[s("div",D,[e[4]||(e[4]=s("div",{class:"card-header"},[s("h3",{class:"font-semibold"},"العملاء حسب المصدر")],-1)),s("div",G,[(d(!0),r(u,null,v(p.value.by_source,(l,o)=>(d(),r("div",{key:o,class:"flex items-center justify-between py-2 border-b last:border-0"},[s("span",null,t(f(o)),1),s("span",I,t(l),1)]))),128))])]),s("div",M,[e[5]||(e[5]=s("div",{class:"card-header"},[s("h3",{class:"font-semibold"},"المشاريع حسب الحالة")],-1)),s("div",N,[(d(!0),r(u,null,v(i.value.by_status,(l,o)=>(d(),r("div",{key:o,class:"flex items-center justify-between py-2 border-b last:border-0"},[s("span",null,t(g(o)),1),s("span",P,t(l),1)]))),128))])]),s("div",S,[e[6]||(e[6]=s("div",{class:"card-header"},[s("h3",{class:"font-semibold"},"المصروفات حسب التصنيف")],-1)),s("div",z,[(d(!0),r(u,null,v(n.value.expenses_by_category,(l,o)=>(d(),r("div",{key:o,class:"flex items-center justify-between py-2 border-b last:border-0"},[s("span",null,t(m(o)),1),s("span",V,t(c(l)),1)]))),128))])]),s("div",A,[e[11]||(e[11]=s("div",{class:"card-header"},[s("h3",{class:"font-semibold"},"ملخص المشاريع")],-1)),s("div",H,[s("div",J,[e[7]||(e[7]=s("span",{class:"text-gray-500"},"إجمالي قيمة المشاريع",-1)),s("span",K,t(c(i.value.total_value)),1)]),s("div",O,[e[8]||(e[8]=s("span",{class:"text-gray-500"},"متوسط قيمة المشروع",-1)),s("span",Q,t(c(i.value.average_value)),1)]),s("div",T,[e[9]||(e[9]=s("span",{class:"text-gray-500"},"متوسط نسبة الإنجاز",-1)),s("span",U,t(Math.round(i.value.average_progress||0))+"%",1)]),s("div",W,[e[10]||(e[10]=s("span",{class:"text-gray-500"},"مشاريع متأخرة",-1)),s("span",X,t(i.value.delayed),1)])])])])]))}};export{$ as default};
