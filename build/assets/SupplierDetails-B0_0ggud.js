import{a as S,r as q,n as F,c as o,d as L,b as s,t as a,s as d,F as u,p as m,e as N,v as V,q as _,h as j,o as i,x as y}from"./app-Cs6lHxPq.js";const B={key:0,class:"space-y-6"},D={class:"flex items-center justify-between"},E={class:"text-sm text-gray-500"},$={class:"text-2xl font-bold"},z={class:"flex items-center gap-2"},G={class:"text-2xl font-bold"},M={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},R={class:"lg:col-span-2 space-y-6"},T={class:"card"},I={class:"card-body grid grid-cols-2 gap-4 text-sm"},O={class:"mr-2"},P={class:"mr-2",dir:"ltr"},U={class:"mr-2"},A={class:"mr-2"},H={class:"mr-2"},J={class:"col-span-2"},K={class:"mr-2"},Q={class:"card"},W={class:"card-body"},X={key:0,class:"text-center text-gray-500 py-4"},Y={key:1,class:"space-y-2"},Z={class:"font-medium"},ss={class:"text-sm text-gray-500"},ts={class:"space-y-6"},es={class:"card"},as={class:"card-body space-y-4"},ns={class:"form-label text-sm"},ls={class:"flex gap-1"},os=["onClick"],cs={__name:"SupplierDetails",setup(is){const x=j(),e=S(null),b={quality_rating:"الجودة",delivery_rating:"التسليم",price_rating:"السعر",communication_rating:"التواصل"},r=q({quality_rating:0,delivery_rating:0,price_rating:0,communication_rating:0,comments:""}),v=async()=>{const{data:n}=await _.get(`/suppliers/${x.params.id}`);e.value=n.data},f=async()=>{await _.post(`/suppliers/${e.value.id}/ratings`,r),Object.assign(r,{quality_rating:0,delivery_rating:0,price_rating:0,communication_rating:0,comments:""}),v()},h=n=>new Intl.NumberFormat("ar-EG",{style:"currency",currency:"EGP"}).format(n),w=n=>({supplier:"مورد",contractor:"مقاول",both:"مورد ومقاول"})[n]||n,k=n=>({draft:"مسودة",pending_approval:"بانتظار الموافقة",approved:"موافق عليه",sent:"مرسل",received:"مستلم"})[n]||n,C=n=>({draft:"badge-gray",approved:"badge-info",received:"badge-success"})[n]||"badge-gray";return F(v),(n,t)=>{var g;return e.value?(i(),o("div",B,[s("div",D,[s("div",null,[s("p",E,a(e.value.code),1),s("h2",$,a(e.value.name),1)]),s("div",z,[t[1]||(t[1]=s("span",{class:"text-yellow-500 text-2xl"},"★",-1)),s("span",G,a(e.value.rating||0),1)])]),s("div",M,[s("div",R,[s("div",T,[t[14]||(t[14]=s("div",{class:"card-header"},[s("h3",{class:"font-semibold"},"البيانات")],-1)),s("div",I,[s("div",null,[t[2]||(t[2]=s("span",{class:"text-gray-500"},"النوع:",-1)),t[3]||(t[3]=d()),s("span",O,a(w(e.value.type)),1)]),s("div",null,[t[4]||(t[4]=s("span",{class:"text-gray-500"},"الهاتف:",-1)),t[5]||(t[5]=d()),s("span",P,a(e.value.phone),1)]),s("div",null,[t[6]||(t[6]=s("span",{class:"text-gray-500"},"البريد:",-1)),t[7]||(t[7]=d()),s("span",U,a(e.value.email||"-"),1)]),s("div",null,[t[8]||(t[8]=s("span",{class:"text-gray-500"},"جهة الاتصال:",-1)),t[9]||(t[9]=d()),s("span",A,a(e.value.contact_person||"-"),1)]),s("div",null,[t[10]||(t[10]=s("span",{class:"text-gray-500"},"التخصص:",-1)),t[11]||(t[11]=d()),s("span",H,a(e.value.specialization||"-"),1)]),s("div",J,[t[12]||(t[12]=s("span",{class:"text-gray-500"},"العنوان:",-1)),t[13]||(t[13]=d()),s("span",K,a(e.value.address||"-"),1)])])]),s("div",Q,[t[15]||(t[15]=s("div",{class:"card-header"},[s("h3",{class:"font-semibold"},"أوامر الشراء")],-1)),s("div",W,[((g=e.value.purchase_orders)==null?void 0:g.length)===0?(i(),o("div",X,"لا توجد أوامر شراء")):(i(),o("div",Y,[(i(!0),o(u,null,m(e.value.purchase_orders,l=>(i(),o("div",{key:l.id,class:"p-3 bg-gray-50 rounded-lg flex items-center justify-between"},[s("div",null,[s("p",Z,a(l.po_number),1),s("p",ss,a(h(l.total)),1)]),s("span",{class:y([C(l.status),"badge"])},a(k(l.status)),3)]))),128))]))])])]),s("div",ts,[s("div",es,[t[16]||(t[16]=s("div",{class:"card-header"},[s("h3",{class:"font-semibold"},"إضافة تقييم")],-1)),s("div",as,[(i(),o(u,null,m(b,(l,c)=>s("div",{key:c},[s("label",ns,a(l),1),s("div",ls,[(i(),o(u,null,m(5,p=>s("button",{key:p,type:"button",onClick:rs=>r[c]=p,class:y([p<=r[c]?"text-yellow-500":"text-gray-300","text-xl"])},"★",10,os)),64))])])),64)),N(s("textarea",{"onUpdate:modelValue":t[0]||(t[0]=l=>r.comments=l),class:"form-input",rows:"2",placeholder:"تعليقات"},null,512),[[V,r.comments]]),s("button",{onClick:f,class:"btn btn-primary w-full"},"حفظ التقييم")])])])])])):L("",!0)}}};export{cs as default};
