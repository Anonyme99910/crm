import{a as v,n as T,c as l,b as s,t as o,i,k as c,l as G,F as f,p as h,q as p,o as d,s as u,x as H}from"./app-PrQ92K9m.js";import{d as q}from"./dayjs.min-CxMP4GVf.js";const P={class:"space-y-6"},I={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},S={class:"stat-card"},A={class:"flex items-center justify-between"},J={class:"stat-value"},K={class:"mt-4 flex items-center text-sm"},O={class:"text-green-600 font-medium"},Q={class:"stat-card"},U={class:"flex items-center justify-between"},W={class:"stat-value"},X={class:"mt-4 flex items-center text-sm"},Z={class:"text-blue-600 font-medium"},$={class:"stat-card"},ss={class:"flex items-center justify-between"},ts={class:"stat-value"},es={class:"mt-4 flex items-center text-sm"},as={class:"text-gray-700 font-medium mr-1"},os={class:"stat-card"},ls={class:"flex items-center justify-between"},ds={class:"stat-value"},ns={class:"mt-4 flex items-center text-sm"},rs={class:"text-green-600 font-medium"},is={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},cs={class:"card"},us={class:"card-body space-y-3"},ms={class:"card lg:col-span-2"},gs={class:"card-header flex items-center justify-between"},vs={class:"card-body"},ps={key:0,class:"text-center text-gray-500 py-8"},_s={key:1,class:"space-y-4"},ys={class:"font-medium text-gray-900"},xs={class:"text-sm text-gray-500"},fs={class:"text-left"},hs={class:"text-xs text-gray-400 mt-1"},bs={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},ws={class:"card"},ks={class:"card-header flex items-center justify-between"},js={class:"card-body"},Ms={key:0,class:"text-center text-gray-500 py-8"},Cs={key:1,class:"space-y-3"},Vs=["checked"],Bs={class:"flex-1"},Ds={class:"font-medium text-gray-900"},Hs={class:"text-sm text-gray-500"},qs={class:"card"},zs={class:"card-header flex items-center justify-between"},Es={class:"card-body"},Fs={key:0,class:"text-center text-gray-500 py-8"},Ls={key:1,class:"space-y-3"},Ns={class:"flex items-center justify-between"},Rs={class:"font-medium text-gray-900"},Ys={class:"text-sm text-gray-500"},Ts={class:"text-sm text-gray-500 mt-1"},Gs={class:"text-xs text-primary-600 mt-1"},As={__name:"Dashboard",setup(Ps){const n=v({}),_=v([]),y=v([]),x=v([]),z=async()=>{try{const[e,t,r,g]=await Promise.all([p.get("/dashboard"),p.get("/leads",{params:{per_page:5}}),p.get("/tasks-today"),p.get("/site-visits-today")]);n.value=e.data.data,_.value=t.data.data,y.value=r.data.data,x.value=g.data.data}catch(e){console.error("Error fetching dashboard:",e)}},b=e=>new Intl.NumberFormat("ar-EG",{style:"currency",currency:"EGP",maximumFractionDigits:0}).format(e),E=e=>q(e).format("YYYY/MM/DD"),F=e=>q(e).format("HH:mm"),L=e=>({hot:"ساخن",warm:"دافئ",cold:"بارد"})[e]||e,N=e=>({hot:"badge-danger",warm:"badge-warning",cold:"badge-info"})[e]||"badge-gray",R=e=>({urgent:"عاجل",high:"مرتفع",medium:"متوسط",low:"منخفض"})[e]||e,Y=e=>({urgent:"badge-danger",high:"badge-warning",medium:"badge-info",low:"badge-gray"})[e]||"badge-gray";return T(z),(e,t)=>{var g,w,k,j,M,C,V,B;const r=G("router-link");return d(),l("div",P,[s("div",I,[s("div",S,[s("div",A,[s("div",null,[s("p",J,o(((g=n.value.leads)==null?void 0:g.total)||0),1),t[0]||(t[0]=s("p",{class:"stat-label"},"إجمالي العملاء",-1))]),t[1]||(t[1]=s("div",{class:"p-3 bg-blue-100 rounded-full"},[s("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"})])],-1))]),s("div",K,[s("span",O,o(((w=n.value.leads)==null?void 0:w.this_month)||0),1),t[2]||(t[2]=s("span",{class:"text-gray-500 mr-1"},"هذا الشهر",-1))])]),s("div",Q,[s("div",U,[s("div",null,[s("p",W,o(((k=n.value.projects)==null?void 0:k.in_progress)||0),1),t[3]||(t[3]=s("p",{class:"stat-label"},"مشاريع قيد التنفيذ",-1))]),t[4]||(t[4]=s("div",{class:"p-3 bg-yellow-100 rounded-full"},[s("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})])],-1))]),s("div",X,[s("span",Z,o(((j=n.value.projects)==null?void 0:j.total)||0),1),t[5]||(t[5]=s("span",{class:"text-gray-500 mr-1"},"إجمالي المشاريع",-1))])]),s("div",$,[s("div",ss,[s("div",null,[s("p",ts,o(b(((M=n.value.finance)==null?void 0:M.this_month_revenue)||0)),1),t[6]||(t[6]=s("p",{class:"stat-label"},"إيرادات الشهر",-1))]),t[7]||(t[7]=s("div",{class:"p-3 bg-green-100 rounded-full"},[s("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1))]),s("div",es,[t[8]||(t[8]=s("span",{class:"text-gray-500"},"إجمالي:",-1)),s("span",as,o(b(((C=n.value.finance)==null?void 0:C.total_revenue)||0)),1)])]),s("div",os,[s("div",ls,[s("div",null,[s("p",ds,o(((V=n.value.quotations)==null?void 0:V.pending)||0),1),t[9]||(t[9]=s("p",{class:"stat-label"},"عروض أسعار معلقة",-1))]),t[10]||(t[10]=s("div",{class:"p-3 bg-purple-100 rounded-full"},[s("svg",{class:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1))]),s("div",ns,[s("span",rs,o(((B=n.value.quotations)==null?void 0:B.accepted)||0),1),t[11]||(t[11]=s("span",{class:"text-gray-500 mr-1"},"مقبولة",-1))])])]),s("div",is,[s("div",cs,[t[16]||(t[16]=s("div",{class:"card-header"},[s("h3",{class:"font-semibold text-gray-900"},"إجراءات سريعة")],-1)),s("div",us,[i(r,{to:"/leads/create",class:"btn btn-primary w-full"},{default:c(()=>[...t[12]||(t[12]=[u(" إضافة عميل جديد ",-1)])]),_:1}),i(r,{to:"/site-visits/create",class:"btn btn-secondary w-full"},{default:c(()=>[...t[13]||(t[13]=[u(" جدولة معاينة ",-1)])]),_:1}),i(r,{to:"/quotations/create",class:"btn btn-secondary w-full"},{default:c(()=>[...t[14]||(t[14]=[u(" إنشاء عرض سعر ",-1)])]),_:1}),i(r,{to:"/tasks/create",class:"btn btn-secondary w-full"},{default:c(()=>[...t[15]||(t[15]=[u(" إضافة مهمة ",-1)])]),_:1})])]),s("div",ms,[s("div",gs,[t[18]||(t[18]=s("h3",{class:"font-semibold text-gray-900"},"أحدث العملاء",-1)),i(r,{to:"/leads",class:"text-sm text-primary-600 hover:underline"},{default:c(()=>[...t[17]||(t[17]=[u("عرض الكل",-1)])]),_:1})]),s("div",vs,[_.value.length===0?(d(),l("div",ps," لا يوجد عملاء حتى الآن ")):(d(),l("div",_s,[(d(!0),l(f,null,h(_.value,a=>(d(),l("div",{key:a.id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[s("div",null,[s("p",ys,o(a.name),1),s("p",xs,o(a.phone),1)]),s("div",fs,[s("span",{class:H([N(a.status),"badge"])},o(L(a.status)),3),s("p",hs,o(E(a.created_at)),1)])]))),128))]))])])]),s("div",bs,[s("div",ws,[s("div",ks,[t[20]||(t[20]=s("h3",{class:"font-semibold text-gray-900"},"مهام اليوم",-1)),i(r,{to:"/tasks",class:"text-sm text-primary-600 hover:underline"},{default:c(()=>[...t[19]||(t[19]=[u("عرض الكل",-1)])]),_:1})]),s("div",js,[y.value.length===0?(d(),l("div",Ms," لا توجد مهام لليوم ")):(d(),l("div",Cs,[(d(!0),l(f,null,h(y.value,a=>{var m;return d(),l("div",{key:a.id,class:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg"},[s("input",{type:"checkbox",checked:a.status==="completed",class:"rounded text-primary-600",disabled:""},null,8,Vs),s("div",Bs,[s("p",Ds,o(a.title),1),s("p",Hs,o((m=a.project)==null?void 0:m.name),1)]),s("span",{class:H([Y(a.priority),"badge"])},o(R(a.priority)),3)])}),128))]))])]),s("div",qs,[s("div",zs,[t[22]||(t[22]=s("h3",{class:"font-semibold text-gray-900"},"معاينات اليوم",-1)),i(r,{to:"/site-visits",class:"text-sm text-primary-600 hover:underline"},{default:c(()=>[...t[21]||(t[21]=[u("عرض الكل",-1)])]),_:1})]),s("div",Es,[x.value.length===0?(d(),l("div",Fs," لا توجد معاينات لليوم ")):(d(),l("div",Ls,[(d(!0),l(f,null,h(x.value,a=>{var m,D;return d(),l("div",{key:a.id,class:"p-3 bg-gray-50 rounded-lg"},[s("div",Ns,[s("p",Rs,o((m=a.lead)==null?void 0:m.name),1),s("span",Ys,o(F(a.scheduled_at)),1)]),s("p",Ts,o(a.address),1),s("p",Gs,"م. "+o((D=a.engineer)==null?void 0:D.name),1)])}),128))]))])])])])}}};export{As as default};
