import{a as u,r as c,n as j,c as n,b as e,w as U,e as a,v as p,y as m,F as g,p as k,i as M,t as v,k as S,l as B,q as f,f as D,o as r,s as F}from"./app-PrQ92K9m.js";const N={class:"max-w-2xl"},R={class:"card"},T={class:"grid grid-cols-2 gap-6"},_=["value"],q=["value"],C={class:"flex gap-4"},E=["disabled"],z={__name:"TaskForm",setup(L){const x=D(),i=u(!1),b=u([]),y=u([]),l=c({title:"",description:"",project_id:null,assigned_to:null,priority:"medium",due_date:""}),w=async()=>{const[o,t]=await Promise.all([f.get("/projects",{params:{per_page:100}}),f.get("/users",{params:{per_page:100}})]);b.value=o.data.data,y.value=t.data.data},V=async()=>{var o,t;i.value=!0;try{await f.post("/tasks",l),x.push("/tasks")}catch(d){alert(((t=(o=d.response)==null?void 0:o.data)==null?void 0:t.message)||"حدث خطأ")}finally{i.value=!1}};return j(w),(o,t)=>{const d=B("router-link");return r(),n("div",N,[e("div",R,[t[16]||(t[16]=e("div",{class:"card-header"},[e("h3",{class:"font-semibold"},"إضافة مهمة جديدة")],-1)),e("form",{onSubmit:U(V,["prevent"]),class:"card-body space-y-6"},[e("div",null,[t[6]||(t[6]=e("label",{class:"form-label"},"عنوان المهمة *",-1)),a(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>l.title=s),type:"text",class:"form-input",required:""},null,512),[[p,l.title]])]),e("div",T,[e("div",null,[t[8]||(t[8]=e("label",{class:"form-label"},"المشروع",-1)),a(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>l.project_id=s),class:"form-input"},[t[7]||(t[7]=e("option",{value:null},"-- اختر --",-1)),(r(!0),n(g,null,k(b.value,s=>(r(),n("option",{key:s.id,value:s.id},v(s.name),9,_))),128))],512),[[m,l.project_id]])]),e("div",null,[t[10]||(t[10]=e("label",{class:"form-label"},"المسؤول",-1)),a(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>l.assigned_to=s),class:"form-input"},[t[9]||(t[9]=e("option",{value:null},"-- اختر --",-1)),(r(!0),n(g,null,k(y.value,s=>(r(),n("option",{key:s.id,value:s.id},v(s.name),9,q))),128))],512),[[m,l.assigned_to]])]),e("div",null,[t[12]||(t[12]=e("label",{class:"form-label"},"الأولوية",-1)),a(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>l.priority=s),class:"form-input"},[...t[11]||(t[11]=[e("option",{value:"low"},"منخفض",-1),e("option",{value:"medium"},"متوسط",-1),e("option",{value:"high"},"مرتفع",-1),e("option",{value:"urgent"},"عاجل",-1)])],512),[[m,l.priority]])]),e("div",null,[t[13]||(t[13]=e("label",{class:"form-label"},"تاريخ الاستحقاق",-1)),a(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>l.due_date=s),type:"date",class:"form-input"},null,512),[[p,l.due_date]])])]),e("div",null,[t[14]||(t[14]=e("label",{class:"form-label"},"الوصف",-1)),a(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=s=>l.description=s),class:"form-input",rows:"3"},null,512),[[p,l.description]])]),e("div",C,[e("button",{type:"submit",disabled:i.value,class:"btn btn-primary"},v(i.value?"جاري الحفظ...":"حفظ"),9,E),M(d,{to:"/tasks",class:"btn btn-secondary"},{default:S(()=>[...t[15]||(t[15]=[F("إلغاء",-1)])]),_:1})])],32)])])}}};export{z as default};
